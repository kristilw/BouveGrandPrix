"use strict";var __decorate=this&&this.__decorate||function(t,o,e,i){var n,r=arguments.length,s=r<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,o,e,i);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(r<3?n(s):r>3?n(o,e,s):n(o,e))||s);return r>3&&s&&Object.defineProperty(o,e,s),s},__metadata=this&&this.__metadata||function(t,o){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,o)},core_1=require("@angular/core"),toplist_service_1=require("../services/toplist.service"),router_1=require("@angular/router"),ToplistComponent=function(){function t(t,o,e,i){this.element=t,this.toplistService=o,this.route=e,this.router=i,this.routeParamSubscription=null,this.focusOnRecord=0,this.scrolledTofocusOn=!1,this.scrollAnimation_smoothnes=20}return t.prototype.ngOnInit=function(){var t=this;this.getToplist(),this.routeParamSubscription=this.route.params.subscribe(function(o){var e=o.id;t.focusOnRecord=e.toString()-1,t.navigateToFocus()})},t.prototype.toplistFinishedLoading=function(t){console.log(t)},t.prototype.getToplist=function(){var t=this;this.toplistService.getToplist().then(function(o){return t.toplist=o}).then(function(){return t.navigateToFocus()})},t.prototype.navigateToFocus=function(){var t=this;if(this.scrolledTofocusOn===!1){console.log("start scroll");var o=this.element.nativeElement.querySelector("[id='toplist_scroll']"),e=55.15*(this.focusOnRecord-3);this.focusOnRecord<101?(this.scrolledTofocusOn=!0,setTimeout(function(){o.scrollTop=0,t.scrollAnimation(o,e,500*Math.sqrt(Math.min(t.focusOnRecord-3,100)))},1500)):setTimeout(function(){o.scrollTop=e},50)}},t.prototype.scrollAnimation=function(t,o,e){for(var i=Math.floor(e/this.scrollAnimation_smoothnes),n=6*o/i,r=function(o){setTimeout(function(){var e=n*(o/i-o/i*(o/i));t.scrollTop+=e},o*s.scrollAnimation_smoothnes)},s=this,c=0;c<i;c++)r(c)},t.prototype.scrollByButton=function(t,o){var e=o*window.innerHeight*.5;this.scrollAnimation(t,e,750)},t.prototype.scrollUp=function(t){t.isTrusted&&this.scrollByButton(this.element.nativeElement.querySelector("[id='toplist_scroll']"),-1)},t.prototype.scrollDown=function(t){t.isTrusted&&this.scrollByButton(this.element.nativeElement.querySelector("[id='toplist_scroll']"),1)},t.prototype.ngOnDestroy=function(){null!==this.routeParamSubscription&&this.routeParamSubscription.unsubscribe()},t.prototype.ngOnChange=function(){},t}();ToplistComponent=__decorate([core_1.Component({selector:"about-screen",templateUrl:"app/toplist/toplist.component.html",styleUrls:["app/toplist/toplist.component.css"]}),__metadata("design:paramtypes",[core_1.ElementRef,toplist_service_1.ToplistService,router_1.ActivatedRoute,router_1.Router])],ToplistComponent),exports.ToplistComponent=ToplistComponent;